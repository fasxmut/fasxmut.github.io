<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>day-13: polymorphism c++</title>
<link rel="stylesheet" href="boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets Vsnapshot">
<link rel="home" href="index.html" title="Learn c++ in days">
<link rel="up" href="index.html" title="Learn c++ in days">
<link rel="prev" href="day-12-cpp-class-multiple-inheritance.html" title="day-12: c++ class: multiple inheritance">
<link rel="next" href="day-14-cpp-virtual-destructor-virtual-inheritance.html" title="day-14: c++ Virtual Destructor, Virtual Inheritance">
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="spirit-nav">
<a accesskey="p" href="day-12-cpp-class-multiple-inheritance.html"><img src="images/prev.png" alt="Prev"></a><a accesskey="u" href="index.html"><img src="images/up.png" alt="Up"></a><a accesskey="h" href="index.html"><img src="images/home.png" alt="Home"></a><a accesskey="n" href="day-14-cpp-virtual-destructor-virtual-inheritance.html"><img src="images/next.png" alt="Next"></a>
</div>
<div class="article">
<div class="titlepage">
<div><div><h1 class="title">
<a name="day-13-polymorphism-cpp"></a>day-13: polymorphism c++</h1></div></div>
<hr>
</div>
<h2>
<a name="day-13-polymorphism-cpp.h0"></a>
      <span class="phrase"><a name="day-13-polymorphism-cpp.polymorphism-cpp"></a></span><a class="link" href="day-13-polymorphism-cpp.html#day-13-polymorphism-cpp.polymorphism-cpp"><span class="cyan">polymorphism c++</span></a>
    </h2>
<p>
      Polymorphism is a c++ skill to make many classes that are related to each other
      by being derived from the same class. Polymorphism means "many forms".
    </p>
<p>
      Polymorphism let different objects to respond the same message differently.
    </p>
<p>
      Note that the above description is just the original polymorphism, which is
      inheritance polymorphism. c++ has many ways to implement polymorphism, not
      only inheritance.
    </p>
<p>
      This article talks inheritance polymorphism only.
    </p>
<h2>
<a name="day-13-polymorphism-cpp.h1"></a>
      <span class="phrase"><a name="day-13-polymorphism-cpp.role_cyan_step_by_step"></a></span><a class="link" href="day-13-polymorphism-cpp.html#day-13-polymorphism-cpp.role_cyan_step_by_step"><span class="cyan">step-by-step</span></a>
    </h2>
<p>
      Step-by-step to write a simple inheritance polymorphism c++ program.
    </p>
<h3>
<a name="day-13-polymorphism-cpp.h2"></a>
      <span class="phrase"><a name="day-13-polymorphism-cpp.step_1_write_base_class_base_cla"></a></span><a class="link" href="day-13-polymorphism-cpp.html#day-13-polymorphism-cpp.step_1_write_base_class_base_cla">Step 1:
      Write base class: base_class</a>
    </h3>
<p>
      Write the base class, and its method: echo.
    </p>
<p>
      echo will be used as the polymorphism response action.
    </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">iostream</span><span class="special">&gt;</span>

<span class="keyword">class</span> <span class="identifier">base_class</span>
<span class="special">{</span>
<span class="keyword">public</span><span class="special">:</span>
	<span class="keyword">virtual</span> <span class="keyword">void</span> <span class="identifier">echo</span><span class="special">()</span> <span class="keyword">const</span>
	<span class="special">{</span>
		<span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="string">"echo echo, I am base"</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span>
	<span class="special">}</span>
<span class="special">};</span>
</pre>
<div class="tip"><table border="0" summary="Tip">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/tip.png"></td>
<th align="left">Tip</th>
</tr>
<tr><td align="left" valign="top"><p>
        <span class="red"><span class="bold"><strong>virtual</strong></span></span>
      </p></td></tr>
</table></div>
<h4>
<a name="day-13-polymorphism-cpp.h3"></a>
      <span class="phrase"><a name="day-13-polymorphism-cpp.virtual-method"></a></span><a class="link" href="day-13-polymorphism-cpp.html#day-13-polymorphism-cpp.virtual-method"><span class="blue">virtual method</span></a>
    </h4>
<p>
      <span class="bold"><strong>Specifier: virtual</strong></span>
    </p>
<p>
      You have noticed that the method echo is marked virtual.
    </p>
<p>
      To make polymorphism c++ work, the related method of the base class must be
      marked <span class="bold"><strong>virtual</strong></span> .
    </p>
<h3>
<a name="day-13-polymorphism-cpp.h4"></a>
      <span class="phrase"><a name="day-13-polymorphism-cpp.step_2_write_the_derived_class_d"></a></span><a class="link" href="day-13-polymorphism-cpp.html#day-13-polymorphism-cpp.step_2_write_the_derived_class_d">Step 2:
      Write the derived class: derived_A</a>
    </h3>
<p>
      Write derived class: derived_A, and its method echo,
    </p>
<p>
      Note that the method name echo is the same as the related method name of its
      base class.
    </p>
<p>
      And the arguments of echo have to be the same too. In this example, it has
      no arguments.
    </p>
<p>
      And the method const must be the same.
    </p>
<pre class="programlisting"><span class="keyword">class</span> <span class="identifier">derived_A</span><span class="special">:</span> <span class="keyword">public</span> <span class="identifier">base_class</span>
<span class="special">{</span>
<span class="keyword">public</span><span class="special">:</span>
	<span class="keyword">void</span> <span class="identifier">echo</span><span class="special">()</span> <span class="keyword">const</span> <span class="identifier">override</span>
	<span class="special">{</span>
		<span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="string">"echo echo, I am derived_A"</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span>
	<span class="special">}</span>
<span class="special">};</span>
</pre>
<h4>
<a name="day-13-polymorphism-cpp.h5"></a>
      <span class="phrase"><a name="day-13-polymorphism-cpp.override"></a></span><a class="link" href="day-13-polymorphism-cpp.html#day-13-polymorphism-cpp.override">Specifier:
      <span class="blue">override</span></a>
    </h4>
<p>
      To make it polymorphism, the same name method of the derived class and the
      method of that name of the base class must meet the following conditions:
    </p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
          <span class="purple">Method name is same</span> - (in this example,
          both the base class and derived class use the same name: <span class="bold"><strong>echo</strong></span>).
        </li>
<li class="listitem">
          <span class="purple">Argument list is same</span> - (in this example,
          they are both empty)
        </li>
<li class="listitem">
          <span class="purple">Return type is same</span> - (in this example,
          they return void)
        </li>
</ul></div>
<p>
      And also because c++ overloading feature, so if they have a little difference,
      it makes a different method and it will not polymorphism.
    </p>
<p>
      To avoid that mistake, you can add the keyword <span class="bold"><strong>override</strong></span>
      at the end of the <span class="bold"><strong>method_name()</strong></span> declaration,
      then the compiler will look up that if an overrode method exists on the base
      class, if not found or mismatched, the compiling will report errors, then you
      will know what's up. No keyword <em class="replaceable"><code>override</code></em>, no compiling
      checking.
    </p>
<h3>
<a name="day-13-polymorphism-cpp.h6"></a>
      <span class="phrase"><a name="day-13-polymorphism-cpp.step_3_do_the_same_to_derived_b"></a></span><a class="link" href="day-13-polymorphism-cpp.html#day-13-polymorphism-cpp.step_3_do_the_same_to_derived_b">Step 3: do
      the same to derived_B</a>
    </h3>
<p>
      Do the same to derived_B.
    </p>
<p>
      Note that derived_B and derived_A are derived from the same class.
    </p>
<pre class="programlisting"><span class="keyword">class</span> <span class="identifier">derived_B</span><span class="special">:</span> <span class="keyword">public</span> <span class="identifier">base_class</span>
<span class="special">{</span>
<span class="keyword">public</span><span class="special">:</span>
	<span class="keyword">void</span> <span class="identifier">echo</span><span class="special">()</span> <span class="keyword">const</span> <span class="identifier">override</span>
	<span class="special">{</span>
		<span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="string">"echo echo, I am derived_B"</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span>
	<span class="special">}</span>
<span class="special">};</span>
</pre>
<h3>
<a name="day-13-polymorphism-cpp.h7"></a>
      <span class="phrase"><a name="day-13-polymorphism-cpp.step_4_create_relation_object"></a></span><a class="link" href="day-13-polymorphism-cpp.html#day-13-polymorphism-cpp.step_4_create_relation_object">Step
      4: Create relation object !</a>
    </h3>
<p>
      <span class="green"><em class="replaceable"><code>Make a polymorphism object:</code></em></span>
    </p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
          Point 1: the object type is the base_class type.
        </li>
<li class="listitem">
          Point 2: the object content is the derived class object.
        </li>
</ul></div>
<p>
      How to implement point 1 and point 2 simultaneously ?
    </p>
<p>
      There are two ways:
    </p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
          c++ reference
        </li>
<li class="listitem">
          c++ pointer
        </li>
</ul></div>
<h4>
<a name="day-13-polymorphism-cpp.h8"></a>
      <span class="phrase"><a name="day-13-polymorphism-cpp.cpp-ref-poly"></a></span><a class="link" href="day-13-polymorphism-cpp.html#day-13-polymorphism-cpp.cpp-ref-poly">c++
      reference</a>
    </h4>
<pre class="programlisting"><span class="identifier">derived_A</span> <span class="identifier">a_obj</span><span class="special">;</span>
<span class="identifier">derived_B</span> <span class="identifier">b_obj</span><span class="special">;</span>

<span class="identifier">base_class</span> <span class="special">&amp;</span> <span class="identifier">base_r</span> <span class="special">=</span> <span class="identifier">a_obj</span><span class="special">;</span>
<span class="identifier">base_class</span> <span class="special">&amp;</span> <span class="identifier">base_s</span> <span class="special">=</span> <span class="identifier">b_obj</span><span class="special">;</span>

<span class="identifier">base_r</span><span class="special">.</span><span class="identifier">echo</span><span class="special">();</span>
<span class="identifier">base_s</span><span class="special">.</span><span class="identifier">echo</span><span class="special">();</span>
</pre>
<p>
      You see, the type of base_r and base_s are base class type: base_class, but
      they are bound to the objects of derived class derived_A and derived_B.
    </p>
<p>
      And <code class="computeroutput"><span class="identifier">base_r</span><span class="special">.</span><span class="identifier">echo</span><span class="special">();</span></code> will
      call the method echo from derived_A, <br> <code class="computeroutput"><span class="identifier">base_s</span><span class="special">.</span><span class="identifier">echo</span><span class="special">();</span></code>
      will call the method echo from derived_B.
    </p>
<h4>
<a name="day-13-polymorphism-cpp.h9"></a>
      <span class="phrase"><a name="day-13-polymorphism-cpp.cpp-ptr-poly"></a></span><a class="link" href="day-13-polymorphism-cpp.html#day-13-polymorphism-cpp.cpp-ptr-poly">c++
      pointer</a>
    </h4>
<p>
      Similar to reference, pointer can be used for polymorphism too.
    </p>
<pre class="programlisting"><span class="identifier">base_class</span> <span class="special">*</span> <span class="identifier">base_ptr</span> <span class="special">=</span> <span class="keyword">new</span> <span class="identifier">derived_A</span><span class="special">;</span>
<span class="identifier">base_ptr</span><span class="special">-&gt;</span><span class="identifier">echo</span><span class="special">();</span>

<span class="keyword">delete</span> <span class="identifier">base_ptr</span><span class="special">;</span>
<span class="identifier">base_ptr</span> <span class="special">=</span> <span class="keyword">new</span> <span class="identifier">derived_B</span><span class="special">;</span>
<span class="identifier">base_ptr</span><span class="special">-&gt;</span><span class="identifier">echo</span><span class="special">();</span>

<span class="keyword">delete</span> <span class="identifier">base_ptr</span><span class="special">;</span>
</pre>
<h3>
<a name="day-13-polymorphism-cpp.h10"></a>
      <span class="phrase"><a name="day-13-polymorphism-cpp.step_5_parameterize"></a></span><a class="link" href="day-13-polymorphism-cpp.html#day-13-polymorphism-cpp.step_5_parameterize">Step
      5: Parameterize</a>
    </h3>
<pre class="programlisting"><span class="comment">// reference</span>
<span class="keyword">void</span> <span class="identifier">call_echo_1</span><span class="special">(</span><span class="identifier">base_class</span> <span class="special">&amp;</span> <span class="identifier">object</span><span class="special">)</span>
<span class="special">{</span>
	<span class="identifier">object</span><span class="special">.</span><span class="identifier">echo</span><span class="special">();</span>
<span class="special">}</span>

<span class="comment">// pointer</span>
<span class="keyword">void</span> <span class="identifier">call_echo_2</span><span class="special">(</span><span class="identifier">base_class</span> <span class="special">*</span> <span class="identifier">object</span><span class="special">)</span>
<span class="special">{</span>
	<span class="identifier">object</span><span class="special">-&gt;</span><span class="identifier">echo</span><span class="special">();</span>
<span class="special">}</span>

<span class="identifier">derived_A</span> <span class="identifier">aa_obj</span><span class="special">;</span>
<span class="identifier">derived_B</span> <span class="identifier">bb_obj</span><span class="special">;</span>

<span class="identifier">call_echo_1</span><span class="special">(</span><span class="identifier">aa_obj</span><span class="special">);</span>
<span class="identifier">call_echo_1</span><span class="special">(</span><span class="identifier">bb_obj</span><span class="special">);</span>

<span class="identifier">call_echo_2</span><span class="special">(&amp;</span><span class="identifier">aa_obj</span><span class="special">);</span>
<span class="identifier">call_echo_2</span><span class="special">(&amp;</span><span class="identifier">bb_obj</span><span class="special">);</span>
</pre>
<h2>
<a name="day-13-polymorphism-cpp.h11"></a>
      <span class="phrase"><a name="day-13-polymorphism-cpp.role_cyan_exercise"></a></span><a class="link" href="day-13-polymorphism-cpp.html#day-13-polymorphism-cpp.role_cyan_exercise"><span class="cyan">Exercise</span></a>
    </h2>
<p>
      Write a complete inheritance polymorphism c++ program that can be compiled,
      use both reference and pointer to do the polymorphism response action. Check,
      modify and compile the code by yourself.
    </p>
<p>
      You can also send your exercise code to the discord server to let others check
      for you. If you send this exercise code to discord server, the following rules
      must be followed: <br> (Discord server can be found on the foot of this page)
    </p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
          <span class="bold"><strong>Only the header iostream is included for this program,
          do not include or use other libraries.</strong></span>
        </li>
<li class="listitem">
          <span class="bold"><strong>Use std::cout to print message.</strong></span>
        </li>
<li class="listitem">
          <span class="bold"><strong>Keep code short, no one like to read a long code
          just for your exercise.</strong></span>
        </li>
</ul></div>
<p>
      <br> <br> <br> <br> <br> <br>
    </p>
<p>
      <em class="replaceable"><code>Written on Nov 05, 2024</code></em>
    </p>
<h2>
<a name="day-13-polymorphism-cpp.h12"></a>
      <span class="phrase"><a name="day-13-polymorphism-cpp.role_cyan_back_to_index"></a></span><a class="link" href="day-13-polymorphism-cpp.html#day-13-polymorphism-cpp.role_cyan_back_to_index"><span class="cyan">Back to index</span></a>
    </h2>
<p>
      <a href="." target="_top">Index</a>
    </p>
<h2>
<a name="day-13-polymorphism-cpp.h13"></a>
      <span class="phrase"><a name="day-13-polymorphism-cpp.cpp-lang"></a></span><a class="link" href="day-13-polymorphism-cpp.html#day-13-polymorphism-cpp.cpp-lang"><span class="cyan">cpp/c++</span></a>
    </h2>
<p>
      c++ std::exception:
    </p>
<p>
      std::cout.write(err.data(), err.size());
    </p>
<p>
      std::cout &lt;&lt; std::endl;
    </p>
<p>
      <span class="purple">caught:</span>
    </p>
<pre class="programlisting">  ==================================================
  #        The c++ programming language.           #
  #                                                #
  #        Join c++ Discord: yZcauUAUyC            #
  #        Deck                                    #
  ==================================================
</pre>
<p>
      <a href="https://cppfx.xyz" target="_top">Home: cppfx.xyz</a>
    </p>
<p>
      <a href="https://cppfx.xyz/kjcpp/kjcpp-print.html" target="_top">K</a>
    </p>
</div>
<div class="copyright-footer"></div>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="day-12-cpp-class-multiple-inheritance.html"><img src="images/prev.png" alt="Prev"></a><a accesskey="u" href="index.html"><img src="images/up.png" alt="Up"></a><a accesskey="h" href="index.html"><img src="images/home.png" alt="Home"></a><a accesskey="n" href="day-14-cpp-virtual-destructor-virtual-inheritance.html"><img src="images/next.png" alt="Next"></a>
</div>
</body>
</html>
