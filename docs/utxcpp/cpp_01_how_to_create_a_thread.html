<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>cpp 01. How to create a thread</title>
<link rel="stylesheet" href="boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets Vsnapshot">
<link rel="home" href="index.html" title="Utxcpp Docs - Utxcpp Official Docs">
<link rel="up" href="utxcpp_thread_tutorial.html" title="Utxcpp Thread Tutorial">
<link rel="prev" href="utxcpp_thread_tutorial.html" title="Utxcpp Thread Tutorial">
<link rel="next" href="cpp_02_control_when_it_is_starte.html" title="cpp 02. Control when it is started">
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="spirit-nav">
<a accesskey="p" href="utxcpp_thread_tutorial.html"><img src="images/prev.png" alt="Prev"></a><a accesskey="u" href="utxcpp_thread_tutorial.html"><img src="images/up.png" alt="Up"></a><a accesskey="h" href="index.html"><img src="images/home.png" alt="Home"></a><a accesskey="n" href="cpp_02_control_when_it_is_starte.html"><img src="images/next.png" alt="Next"></a>
</div>
<div class="article">
<div class="titlepage">
<div><div><h2 class="title">
<a name="cpp_01_how_to_create_a_thread"></a>cpp 01. How to create a thread</h2></div></div>
<hr>
</div>
<p>
          To avoid utxcpp thread api acting like a black box for users, I write this
          utxcpp thread tutorial. Without this tutorial, the behavior and characteristics
          of the thread are not clear. What is the meaning of "users"?
          "users" does not mean inferior citizen, the api developers might
          be their own users in future too, developers and users exchange role play.
          I may forget the usage of the thread api in the future, then I need this
          tutorial for myself.
        </p>
<h2>
<a name="cpp_01_how_to_create_a_thread.h0"></a>
          <span class="phrase"><a name="cpp_01_how_to_create_a_thread.role_cyan_cpp_01_how_to_create_a"></a></span><a class="link" href="cpp_01_how_to_create_a_thread.html#cpp_01_how_to_create_a_thread.role_cyan_cpp_01_how_to_create_a"><span class="cyan">cpp 01. How to create a thread</span></a>
        </h2>
<p>
          01. How to create a thread, c++.
        </p>
<p>
          utx::thread
        </p>
<p>
          utx::jthread
        </p>
<p>
          utx::fthread
        </p>
<h3>
<a name="cpp_01_how_to_create_a_thread.h1"></a>
          <span class="phrase"><a name="cpp_01_how_to_create_a_thread.derived_from_utx_task_to_create_"></a></span><a class="link" href="cpp_01_how_to_create_a_thread.html#cpp_01_how_to_create_a_thread.derived_from_utx_task_to_create_">Derived
          from utx::task to create a task</a>
        </h3>
<p>
          Minimal task, .run() is the only method that you should to create and override.
        </p>
<pre class="programlisting"><span class="keyword">class</span> <span class="identifier">some_task</span><span class="special">:</span> <span class="keyword">public</span> <span class="identifier">utx</span><span class="special">::</span><span class="identifier">task</span>
<span class="special">{</span>
<span class="keyword">public</span><span class="special">:</span>
	<span class="keyword">void</span> <span class="identifier">run</span><span class="special">()</span> <span class="identifier">override</span>
	<span class="special">{</span>
		<span class="comment">// do some tasks.</span>
	<span class="special">}</span>
<span class="special">};</span>

<span class="identifier">some_task</span> <span class="identifier">a_task</span><span class="special">{};</span>	<span class="comment">// create a task</span>
</pre>
<h3>
<a name="cpp_01_how_to_create_a_thread.h2"></a>
          <span class="phrase"><a name="cpp_01_how_to_create_a_thread.create_and_launch_a_thread"></a></span><a class="link" href="cpp_01_how_to_create_a_thread.html#cpp_01_how_to_create_a_thread.create_and_launch_a_thread">Create
          and launch a thread</a>
        </h3>
<p>
          Then create and launch a thread, everything is ready now! The thread will
          automatically launch the task on constructing.
        </p>
<pre class="programlisting"><span class="identifier">utx</span><span class="special">::</span><span class="identifier">thread</span> <span class="identifier">thread</span><span class="special">{</span><span class="identifier">a_task</span><span class="special">};</span>
</pre>
<p>
          Note that there are three types of thread of utxcpp:
        </p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
              <span class="bold"><strong>utx::thread</strong></span> - native thread type is
              std::thread
            </li>
<li class="listitem">
              <span class="bold"><strong>utx::jthread</strong></span> - native thread type
              is std::jthread
            </li>
<li class="listitem">
              <span class="bold"><strong>utx::fthread</strong></span> - native thread type
              is std::future
            </li>
</ul></div>
<h2>
<a name="cpp_01_how_to_create_a_thread.h3"></a>
          <span class="phrase"><a name="cpp_01_how_to_create_a_thread.role_cyan_final_cpp_complete_exa"></a></span><a class="link" href="cpp_01_how_to_create_a_thread.html#cpp_01_how_to_create_a_thread.role_cyan_final_cpp_complete_exa"><span class="cyan">Final cpp complete example</span></a>
        </h2>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">utxcpp</span><span class="special">/</span><span class="identifier">core</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">utxcpp</span><span class="special">/</span><span class="identifier">thread</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>

<span class="keyword">class</span> <span class="identifier">some_task</span><span class="special">:</span> <span class="keyword">public</span> <span class="identifier">utx</span><span class="special">::</span><span class="identifier">task</span>
<span class="special">{</span>
<span class="keyword">public</span><span class="special">:</span>
	<span class="keyword">void</span> <span class="identifier">run</span><span class="special">()</span> <span class="identifier">override</span>
	<span class="special">{</span>
		<span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="string">"This is a thread task."</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span>
	<span class="special">}</span>
<span class="special">};</span>

<span class="keyword">int</span> <span class="identifier">main</span><span class="special">()</span>
<span class="special">{</span>
	<span class="identifier">some_task</span> <span class="identifier">a_task</span><span class="special">{};</span>
	<span class="identifier">utx</span><span class="special">::</span><span class="identifier">thread</span> <span class="identifier">a_thread</span><span class="special">{</span><span class="identifier">a_task</span><span class="special">};</span>
	
	<span class="comment">/* works too:
	utx::jthread b_thread{a_task};
	utx::fthread c_thread{a_task};
	*/</span>
<span class="special">}</span>
</pre>
<h2>
<a name="cpp_01_how_to_create_a_thread.h4"></a>
          <span class="phrase"><a name="cpp_01_how_to_create_a_thread.role_cyan"></a></span><a class="link" href="cpp_01_how_to_create_a_thread.html#cpp_01_how_to_create_a_thread.role_cyan"><span class="cyan"></span></a>
        </h2>
<p>
          May 02, 2024
        </p>
<h2>
<a name="cpp_01_how_to_create_a_thread.h5"></a>
          <span class="phrase"><a name="cpp_01_how_to_create_a_thread.role_cyan_see_also"></a></span><a class="link" href="cpp_01_how_to_create_a_thread.html#cpp_01_how_to_create_a_thread.role_cyan_see_also"><span class="cyan">See Also</span></a>
        </h2>
<p>
          <a class="link" href="utx_task.html" title="utx::task">utx::task</a>
        </p>
<p>
          <a class="link" href="utx_thread.html" title="utx::thread">utx::thread</a>
        </p>
<p>
          <a class="link" href="utx_jthread.html" title="utx::jthread">utx::jthread</a>
        </p>
<p>
          <a class="link" href="utx_fthread.html" title="utx::fthread">utx::fthread</a>
        </p>
<p>
          ________________________________________________________________________________
        </p>
<p>
          Index: <a class="link" href="utxcpp_thread_tutorial.html" title="Utxcpp Thread Tutorial">Utxcpp Thread Tutorial</a>
        </p>
<p>
          <a class="link" href="thread.html" title="Thread">Utxcpp Thread</a>
        </p>
</div>
<div class="copyright-footer">Copyright Â© 2022-2024 Fas Xmut<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="utxcpp_thread_tutorial.html"><img src="images/prev.png" alt="Prev"></a><a accesskey="u" href="utxcpp_thread_tutorial.html"><img src="images/up.png" alt="Up"></a><a accesskey="h" href="index.html"><img src="images/home.png" alt="Home"></a><a accesskey="n" href="cpp_02_control_when_it_is_starte.html"><img src="images/next.png" alt="Next"></a>
</div>
</body>
</html>
